(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41bc222c"],{"169a":function(t,e,i){"use strict";i("6ec0");var n=i("c69d"),a=i("30d4"),s=i("14ec"),r=i("e949"),o=i("261e"),c=i("98a1"),l=i("c584"),d=i("80d2"),u=i("bfc5"),h=i("d9bd"),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e["a"]={name:"v-dialog",directives:{ClickOutside:l["a"]},mixins:[n["a"],a["a"],s["a"],r["a"],o["a"],c["a"]],props:{disabled:Boolean,persistent:Boolean,fullscreen:Boolean,fullWidth:Boolean,noClickAnimation:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[String,Number],default:"none"},origin:{type:String,default:"center center"},width:{type:[String,Number],default:"auto"},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"}},data:function(){return{animate:!1,animateTimeout:null,stackClass:"v-dialog__content--active",stackMinZIndex:200}},computed:{classes:function(){var t;return t={},v(t,("v-dialog "+this.contentClass).trim(),!0),v(t,"v-dialog--active",this.isActive),v(t,"v-dialog--persistent",this.persistent),v(t,"v-dialog--fullscreen",this.fullscreen),v(t,"v-dialog--scrollable",this.scrollable),v(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},beforeMount:function(){var t=this;this.$nextTick(function(){t.isBooted=t.isActive,t.isActive&&t.show()})},mounted:function(){"v-slot"===Object(d["k"])(this,"activator",!0)&&Object(h["a"])("v-dialog's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick(function(){t.animate=!0,clearTimeout(t.animateTimeout),t.animateTimeout=setTimeout(function(){return t.animate=!1},150)})},closeConditional:function(t){return!(this.$refs.content.contains(t.target)||!this.isActive)&&(this.persistent?(this.noClickAnimation||this.overlay!==t.target||this.animateClick(),!1):Object(d["l"])(this.$refs.content)>=this.getMaxZIndex())},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):s["a"].options.methods.hideScroll.call(this)},show:function(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$refs.content.focus(),this.$listeners.keydown&&this.bind()},bind:function(){window.addEventListener("keydown",this.onKeydown)},unbind:function(){window.removeEventListener("keydown",this.onKeydown)},onKeydown:function(t){this.$emit("keydown",t)},genActivator:function(){var t=this;if(!this.hasActivator)return null;var e=this.disabled?{}:{click:function(e){e.stopPropagation(),t.disabled||(t.isActive=!t.isActive)}};if("scoped"===Object(d["k"])(this,"activator")){var i=this.$scopedSlots.activator({on:e});return this.activatorNode=i,i}return this.$createElement("div",{staticClass:"v-dialog__activator",class:{"v-dialog__activator--disabled":this.disabled},on:e},this.$slots.activator)}},render:function(t){var e=this,i=[],n={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:function(){return e.isActive=!1},args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],on:{click:function(t){t.stopPropagation()}}};this.fullscreen||(n.style={maxWidth:"none"===this.maxWidth?void 0:Object(d["b"])(this.maxWidth),width:"auto"===this.width?void 0:Object(d["b"])(this.width)}),i.push(this.genActivator());var a=t("div",n,this.showLazyContent(this.$slots.default));return this.transition&&(a=t("transition",{props:{name:this.transition,origin:this.origin}},[a])),i.push(t("div",{class:this.contentClasses,attrs:f({tabIndex:"-1"},this.getScopeIdAttrs()),style:{zIndex:this.activeZIndex},ref:"content"},[this.$createElement(u["a"],{props:{root:!0,light:this.light,dark:this.dark}},[a])])),t("div",{staticClass:"v-dialog__container",style:{display:!this.hasActivator||this.fullWidth?"block":"inline-block"}},i)}}},"26e5":function(t,e,i){},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"4bd4":function(t,e,i){"use strict";i("26e5");var n=i("94ab");e["a"]={name:"v-form",mixins:[Object(n["b"])("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",function(i){e.$set(e.errorBag,t._uid,i)},{immediate:!0})},n={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))}):n.valid=i(t),n},validate:function(){var t=this.inputs.filter(function(t){return!t.validate(!0)}).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find(function(e){return e._uid===t._uid});if(e){var i=this.watchers.find(function(t){return t._uid===e._uid});i.valid&&i.valid(),i.shouldValidate&&i.shouldValidate(),this.watchers=this.watchers.filter(function(t){return t._uid!==e._uid}),this.inputs=this.inputs.filter(function(t){return t._uid!==e._uid}),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},"68e3":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.entity?i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("h1",[t._v(t._s(t.entity.display_name_plural))]),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"690px"},scopedSlots:t._u([t.entity.hideAddButton?null:{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{color:"success"},on:{click:t.setDefaultValues}},n),[t._v("\n          Agregar\n        ")])]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))]),t.item.updated_at?i("v-subheader",[t._v("\n            Ultima modificacion: "+t._s(t.moment(t.item.updated_at).fromNow())+"\n          ")]):t._e()],1),i("v-card-text",[i("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[t._l(t.getEntityForm(t.entity,-1!==t.editedIndex),function(e){return[i("render-field",{key:"item-form-"+e,attrs:{entity:t.entity,field:e,item:t.item,"edited-index":t.editedIndex,rules:t.getFieldValidations(t.entity,e,t.item),"change-handler":function(i){return t.item[e]=i}}})]})],2)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("\n            Cancelar\n          ")]),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("\n            Guardar\n          ")])],1)],1)],1)],1),i("div",[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.getEntityHeaders(t.entity),search:t.search,items:t.getItems({entity:t.entity.apiUrl,params:{office:t.$store.state.app.selectedOffice}}),"custom-filter":t.customFilter,"no-results-text":"No se encontraron registros"},scopedSlots:t._u([{key:"items",fn:function(e){return[t._l(Object.keys(t.entity.field_configs.list),function(n){return i("td",{key:"item-"+e.index+"-"+n,class:{"text-xs-center":"center"===t.entity.field_configs.list[n].align,"text-xs-right":"right"===t.entity.field_configs.list[n].align,"text-xs-left":"left"===t.entity.field_configs.list[n].align},on:{click:function(i){return t.editItem(e.item)}}},[t.entity.field_configs.list[n].formatter?i(t.entity.field_configs.list[n].formatter,t._b({tag:"component"},"component",e.item,!1)):i("div",[t._v("\n            "+t._s(e.item[n])+"\n          ")])],1)}),t.entity.no_actions?t._e():i("td",{staticClass:"justify-center layout px-0"},[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){return t.editItem(e.item)}}},[t._v("\n            edit\n          ")]),i("v-icon",{attrs:{small:""},on:{click:function(i){return t.deleteItem(e.item)}}},[t._v("\n            delete\n          ")])],1)]}},{key:"no-data",fn:function(){return[i("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("\n          Reset\n        ")])]},proxy:!0}],null,!1,228961364)})],1)],1):t._e()},a=[],s=(i("28a5"),i("386d"),i("6b54"),i("06db"),i("a4bb")),r=i.n(s),o=i("768b"),c=(i("96cf"),i("3b8d")),l=(i("a481"),i("5176")),d=i.n(l),u=i("cebc"),h=i("6d31"),f=i("ed08"),v=i("7f8c"),m=i("2f62"),p=i("c1df"),g=i.n(p);g.a.locale("es");var b={components:{RenderField:v["a"]},data:function(){return{search:"",dialog:!1,entity:null,editedIndex:-1,item:null}},computed:Object(u["a"])({formTitle:function(){return-1===this.editedIndex?"Crear ".concat(this.entity.display_name):"Editar ".concat(this.entity.display_name)}},Object(m["b"])("entities",["getItems"])),watch:{dialog:function(t){t||this.close(),this.$refs.form.resetValidation()}},created:function(){this.initialize()},methods:{initialize:function(){if(Object(h["g"])({url:"almacen"}))return this.entity=Object(h["d"])({url:"almacen"}),this.item=d()({},Object(h["a"])(this.entity)),void(this.$store.state.entities[this.entity.apiUrl].length||this.$store.dispatch("entities/read",{entity:this.entity.apiUrl}));this.$router.replace("/")},editItem:function(t){this.editedIndex=this.$store.state.entities[this.entity.apiUrl].indexOf(t),this.item=d()({},t),this.dialog=!0},deleteItem:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var i,n,a,s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=this.$store.state.entities[this.entity.apiUrl].indexOf(e),!window.confirm("¿Esta seguro de eliminar este registro?")){t.next=9;break}return t.next=4,this.$store.dispatch("entities/delete",{deletedItem:i,entity:this.entity.apiUrl,item:e});case 4:n=t.sent,a=Object(o["a"])(n,2),s=a[0],r=a[1],s||this.$store.commit("app/showAlert",r);case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.item=d()({},Object(h["a"])(t.entity)),t.editedIndex=-1},300)},save:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,i,n,a,s,c,l,d,h,f,v=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=20;break}if(!(this.editedIndex>-1)){t.next=11;break}return t.next=4,this.$store.dispatch("entities/update",{updatedItem:this.editedIndex,entity:this.entity.apiUrl,item:this.item});case 4:e=t.sent,i=Object(o["a"])(e,2),n=i[0],a=i[1],n?n.response&&n.response.data&&n.response.data.error&&(s=n.response.data,this.$store.commit("app/showAlert",Object(u["a"])({},s,{message:s.error[r()(s.error)[0]][0]}))):(this.$store.commit("app/showAlert",a),this.close()),t.next=18;break;case 11:return t.next=13,this.$store.dispatch("entities/create",{entity:this.entity.apiUrl,item:this.item});case 13:c=t.sent,l=Object(o["a"])(c,2),d=l[0],h=l[1],d?d.response&&d.response.data&&d.response.data.error&&(f=d.response.data,this.$store.commit("app/showAlert",Object(u["a"])({},f,{message:f.error[r()(f.error)[0]][0]}))):(this.$store.commit("app/showAlert",h),this.close());case 18:t.next=22;break;case 20:this.$refs.form.resetValidation(),setTimeout(function(){v.$refs.form.validate()},400);case 22:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),customFilter:function(t,e,i){var n=e.toString().toLowerCase();if(""===n.trim())return t;var a=this.entity.field_configs.search;return t.filter(function(t){return(a||r()(t)).some(function(e){return i(Object(f["b"])(t,e.split(".")),n)})})},setDefaultValues:function(){this.item.office_id=this.$store.state.app.selectedOffice.id},getEntityHeaders:h["c"],getEntityForm:h["b"],getFieldValidations:h["e"],moment:g.a}},y=b,_=i("2877"),w=i("6544"),x=i.n(w),k=i("8336"),$=i("b0af"),O=i("99d9"),A=i("12b2"),V=i("8fea"),j=i("169a"),I=i("4bd4"),C=i("132d"),S=i("9910"),B=i("e0c7"),T=i("2677"),E=i("71d9"),z=Object(_["a"])(y,n,a,!1,null,null,null);e["default"]=z.exports;x()(z,{VBtn:k["a"],VCard:$["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:A["a"],VDataTable:V["a"],VDialog:j["a"],VForm:I["a"],VIcon:C["a"],VSpacer:S["a"],VSubheader:B["a"],VTextField:T["a"],VToolbar:E["a"]})},"6b54":function(t,e,i){"use strict";i("3846");var n=i("cb7c"),a=i("0bfb"),s=i("9e1e"),r="toString",o=/./[r],c=function(t){i("2aba")(RegExp.prototype,r,t,!0)};i("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?c(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?a.call(t):void 0)}):o.name!=r&&c(function(){return o.call(this)})},"6ec0":function(t,e,i){},a481:function(t,e,i){"use strict";var n=i("cb7c"),a=i("4bf8"),s=i("9def"),r=i("4588"),o=i("0390"),c=i("5f1b"),l=Math.max,d=Math.min,u=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};i("214f")("replace",2,function(t,e,i,m){return[function(n,a){var s=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,s,a):i.call(String(s),n,a)},function(t,e){var a=m(i,t,this,e);if(a.done)return a.value;var u=n(t),h=String(this),f="function"===typeof e;f||(e=String(e));var g=u.global;if(g){var b=u.unicode;u.lastIndex=0}var y=[];while(1){var _=c(u,h);if(null===_)break;if(y.push(_),!g)break;var w=String(_[0]);""===w&&(u.lastIndex=o(h,s(u.lastIndex),b))}for(var x="",k=0,$=0;$<y.length;$++){_=y[$];for(var O=String(_[0]),A=l(d(r(_.index),h.length),0),V=[],j=1;j<_.length;j++)V.push(v(_[j]));var I=_.groups;if(f){var C=[O].concat(V,A,h);void 0!==I&&C.push(I);var S=String(e.apply(void 0,C))}else S=p(O,h,A,V,I,e);A>=k&&(x+=h.slice(k,A)+S,k=A+O.length)}return x+h.slice(k)}];function p(t,e,n,s,r,o){var c=n+t.length,l=s.length,d=f;return void 0!==r&&(r=a(r),d=h),i.call(o,d,function(i,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":o=r[a.slice(1,-1)];break;default:var d=+a;if(0===d)return i;if(d>l){var h=u(d/10);return 0===h?i:h<=l?void 0===s[h-1]?a.charAt(1):s[h-1]+a.charAt(1):i}o=s[d-1]}return void 0===o?"":o})}})}}]);
//# sourceMappingURL=chunk-41bc222c.b882e1f8.js.map